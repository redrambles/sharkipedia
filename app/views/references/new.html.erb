<script src="https://cdn.rawgit.com/mattmezza/bulmahead/master/dist/bulmahead.bundle.js"></script>

<h1 class="title is-3 is-spaced"> New Reference </h1>

<%= form_with model: @reference do |f| %>

  <%= render partial: 'errors', locals: { reference: @reference } %>

  <div class="columns">
    <div class="column">
      <div class="field">
        <%= f.label :name, 'Author Year', class: 'label' %>
        <div class="control">
          <%= f.text_field :name, class: 'input' %><br />
        </div>
      </div>
    </div>

    <div class="column">
      <div class="field">
        <%= f.label :suffix, class: 'label' %>
        <div class="control">
          <%= f.text_field :suffix, class: 'input' %><br />
        </div>
      </div>
    </div>

    <div class="column">
      <div class="field">
        <%= f.label :year, class: 'label' %>
        <div class="control">
          <%= f.text_field :year, class: 'input' %><br />
        </div>
      </div>
    </div>
  </div>


  <div id="authors">
    <%= f.fields_for :authors do |author_form| %>
      <%= render 'author_fields', form: author_form %>
    <% end %>
  </div>
  <div class="add-author">
    <%= link_to_add_nested(f, :authors, '#authors') %>
  </div>


  <div class="field">
    <%= f.label :title, class: 'label' %>
    <div class="control">
      <%= f.text_field :title, class: 'input'%><br />
    </div>
  </div>

  <div class="field">
    <%= f.label :journal, class: 'label' %>
    <div class="control">
      <%= f.text_field :journal, class: 'input'%><br />
    </div>
  </div>

 <div class="columns">
    <div class="column">
      <div class="field">
        <%= f.label :volume, class: 'label' %>
        <div class="control">
          <%= f.text_field :volume, class: 'input'%><br />
        </div>
      </div>
    </div>
      <div class="column">
      <div class="field">
        <%= f.label :issue, class: 'label' %>
        <div class="control">
          <%= f.text_field :issue, class: 'input'%><br />
        </div>
      </div>
    </div>
    <div class="column">
      <div class="field">
        <%= f.label :pages, class: 'label' %>
        <div class="control">
          <%= f.text_field :pages, class: 'input'%><br />
        </div>
      </div>
    </div>
    <div class="column">
      <div class="field">
        <%= f.label :start_page, class: 'label' %>
        <div class="control">
          <%= f.text_field :start_page, class: 'input'%><br />
        </div>
      </div>
    </div>
  </div>

   <div class="columns">
    <div class="column">
      <div class="field">
        <%= f.label :epub_date, class: 'label' %>
        <div class="control">
          <%= f.text_field :epub_date, class: 'input'%><br />
        </div>
      </div>
    </div>
      <div class="column">
      <div class="field">
        <%= f.label :errata, class: 'label' %>
        <div class="control">
          <%= f.text_field :errata, class: 'input'%><br />
        </div>
      </div>
    </div>
  </div>

  <div class="field">
    <%= f.label :doi, class: 'label' %>
    <div class="control">
      <%= f.text_field :doi, class: 'input' %><br />
    </div>
  </div>

  <div class="field">
    <%= f.label :data_source, class: 'label' %>
    <div class="control">
      <%= f.text_field :data_source, class: 'input' %><br />
    </div>
  </div>

  <div class="field">
    <%= f.label :reference, class: 'label' %>
    <div class="control">
      <%= f.text_field :reference, class: 'input' %><br />
    </div>
  </div>

  <div class="columns">
    <div class="column">
      <div class="field">
        <%= f.label :reference_file, class: 'label' %>
        <div class="control">
          <%= f.file_field :reference_file, multiple: false, direct_upload: true, accept: 'application/pdf' %>
        </div>
      </div>
    </div>

    <div class="column">
      <div class="field">
        <%= f.label :file_public, 'Make file public?', class: 'label' %>
        <div class="control">
          <%= f.check_box :file_public, checked: true %> Allow public access to the reference file
        </div>
      </div>
    </div>
  </div>

  <div class="field">
    <div class="control">
      <%= f.submit class: 'button is-primary is-fullwidth' %>
    </div>
  </div>
<% end %>

